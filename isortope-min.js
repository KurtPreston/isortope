var isortopeNumToString=function(number){number=parseFloat(number)+450359962737;var length=40;var str=number.toString();var numDigits=Math.floor(Math.log(number)/Math.LN10);for(var i=numDigits;i<length;i++){str="0"+str}return str};var isortopeParseString=function(text){text=text.replace(/^\s+|\s+$/g,"");var numText=text.split(" ")[0].replace(/[^a-zA-Z0-9\.-]/g,"");if(!isNaN(parseFloat(numText))){return isortopeNumToString(numText)}else{return text.toLowerCase()}};var isortopeCellFilter=function(element){var text=$(element).text().replace(/^\s+|\s+$/g,"");var input=$(element).find("input");var returnVal;if(text!==""){returnVal=isortopeParseString(text)}else if(input.length>0){if(input.val()=="on"){returnVal=input.is(":checked").toString()}else{returnVal=isortopeParseString(input.val())}}else{returnVal=$(element).html()}return returnVal};jQuery.fn.contentChange=function(callback){var elms=jQuery(this);elms.each(function(i){var elm=jQuery(this);elm.data("lastContents",elm.html());window.watchContentChange=window.watchContentChange?window.watchContentChange:[];window.watchContentChange.push({element:elm,callback:callback})});return elms};setInterval(function(){if(window.watchContentChange){for(var i in window.watchContentChange){if(window.watchContentChange[i].element.data("lastContents")!=window.watchContentChange[i].element.html()){window.watchContentChange[i].callback.apply(window.watchContentChange[i].element);window.watchContentChange[i].element.data("lastContents",window.watchContentChange[i].element.html())}}}},500);(function($,doc,win){"use strict";function Isortope(el,opts){this.$el=$(el);this.defaults={autoResort:true,autoResortInput:true,autoResortContent:true};this.opts=$.extend(this.defaults,opts,{autoResort:this.$el.data("isortope-autoresort"),autoResortInput:this.$el.data("isortope-autoresort-input"),autoResortContent:this.$el.data("isortope-autoresort-content")});this.resort=function(){this.$el.data("isortope").sortTable()};this.init();this.$el.data("isortope",this)}$.fn.isortope=function(opts){if(opts=="resort"){return this.each(function(){var rows=$(this).find("tbody tr");$(this).find("tbody").isotope("updateSortData",rows);$(this).data("isortope").resort()})}else{return this.each(function(){new Isortope(this,opts)})}};Isortope.prototype.init=function(){var table=this.$el;var tbody=table.find("tbody");var rows=table.find("tr");table.css("position","relative");table.css("height",table.height());var numCols=table.find("th").length;for(var col=0;col<numCols;col++){var colWidth=table.find("tr:first-child td:nth-child("+(col+1)+")").width();table.find("tr td:nth-child("+(col+1)+")").css("width",colWidth);var th=table.find("th:nth-child("+(col+1)+")");var thWidth=th.width();th.css("width",thWidth);th.css("max-width",thWidth)}rows.each(function(index,el){$(el).css("height",$(el).height())});var cells=tbody.find("td");var borderTopHeight=cells.css("border-top-width");var borderBottomHeight=cells.css("border-bottom-width");var clearBorders=function(){cells.css("border-top-width",0);cells.css("border-bottom-width",0)};var restoreBorders=function(){cells.css("border-top-width",borderTopHeight);cells.css("border-bottom-width",borderBottomHeight)};if(table.css("border-collapse")=="separate"){var rows=tbody.find("tr");var marginSpacing=parseInt(table.css("border-spacing").split(" ")[0]);var borderSpacing=parseInt(borderBottomHeight);rows.css("margin-bottom",marginSpacing+borderSpacing+"px")}var sorters={};for(var col=0;col<numCols;col++){var colClass="col"+col;var th=table.find("th:nth-child("+(col+1)+")");if(th.attr("data-sort-type")!="none"){var sortFunctionDef="return isortopeCellFilter(item.find('."+colClass+"'));";var sortFunction=new Function("item",sortFunctionDef);sorters[colClass]=sortFunction;th.attr("data-sort-type",colClass);th.css("cursor","pointer");table.find("tr td:nth-child("+(col+1)+")").addClass(colClass);table.find("tr td:nth-child("+(col+1)+")").data("sort-type",colClass)}}var headerHeight=table.find("thead").offset().top;tbody.each(function(index,el){var yOffset=$(el).offset().top-headerHeight;$(el).data("offsetHeight",yOffset)});clearBorders();tbody.each(function(index,el){$(el).isotope({itemSelector:"tr",layout:"fitRows",getSortData:sorters})});restoreBorders();tbody.each(function(index,el){var yOffset=$(el).data("offsetHeight");$(el).find("tr").css("top",yOffset)});var th=table.find("th");th.height(th.height());th.css("line-height",1);var removeSortArrow=function(){var activeHeader=table.find("th.sortAsc,th.sortDesc");activeHeader.find(".sort-arrow").remove();activeHeader.removeClass("sortAsc").removeClass("sortDesc")};table.find("th").click(function(){var sort=$(this).attr("data-sort-type");if(sort=="none"){return}var reverse;if($(this).hasClass("sortAsc")){reverse=true;removeSortArrow();$(this).html($(this).html()+'<span class="sort-arrow">▼</span>');$(this).addClass("sortDesc")}else{reverse=false;removeSortArrow();$(this).html($(this).html()+'<span class="sort-arrow">▲</span>');$(this).addClass("sortAsc")}sortTable()});var sortTable=function(){var $th=$(table).find("th.sortAsc, th.sortDesc").closest("th");var sort=$th.attr("data-sort-type");var reverse=$th.hasClass("sortDesc");clearBorders();tbody.isotope({sortBy:sort,sortAscending:!reverse});restoreBorders();table.trigger("sort")};this.sortTable=sortTable;var cellChanged=function(cell){var parentRow=$(cell).closest("tr");tbody.isotope("updateSortData",parentRow);var column=$(cell).data("sort-type");var columnHeader=$("th[data-sort-type="+column+"]");if(columnHeader.hasClass("sortAsc")||columnHeader.hasClass("sortDesc")){sortTable()}};if(this.opts.autoResort&&this.opts.autoResortInput){table.find("input").change(function(){var cell=$(this).parent("td");cellChanged(cell)})}if(this.opts.autoResort&&this.opts.autoResortContent){table.find("td").contentChange(function(){cellChanged(this)})}table.trigger("initialized")}})(jQuery,document,window);$(document).ready(function(){$("table.isortope").isortope()});
